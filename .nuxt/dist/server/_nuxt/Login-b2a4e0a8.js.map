{"version":3,"file":"Login-b2a4e0a8.js","sources":["../../../../pages/Login.vue"],"sourcesContent":["<script setup>\r\n  import {\r\n    ref,\r\n    onMounted\r\n  } from 'vue';\r\n  import axios from 'axios';\r\n\r\n  const username = ref('');\r\n  const password = ref('');\r\n\r\n  const login = () => {\r\n    axios.post('http://127.0.0.1:8000/login', {\r\n      username: username.value,\r\n      password: password.value\r\n    }).then((res) => {\r\n      console.log('Login ==> ', res);\r\n      if (res.data.statusCode === 200) {\r\n        const request = indexedDB.open('iris', 3);\r\n        request.onupgradeneeded = (event) => {\r\n          const db = event.target.result;\r\n          const objectStore = db.createObjectStore('user', {\r\n            keyPath: \"user_id\"\r\n          });\r\n          objectStore.createIndex(\"username\", \"username\", {\r\n            unique: true\r\n          });\r\n          objectStore.createIndex(\"token\", \"token\", {\r\n            unique: true\r\n          });\r\n\r\n          objectStore.transaction.oncomplete = async (event) => {\r\n            // Store values in the newly created objectStore.\r\n            const userObjectStore = db\r\n              .transaction(\"user\", \"readwrite\")\r\n              .objectStore(\"user\");\r\n\r\n            await userObjectStore.add(res.data.data);\r\n            location.href = '/';\r\n          };\r\n        };\r\n      }\r\n    }).catch((err) => {\r\n      throw new Error(err);\r\n    })\r\n  }\r\n\r\n  onMounted(() => {\r\n    // const request = indexedDB.open('iris', 3);\r\n    // request.onsuccess = (event) => {\r\n    //   const db = event.target.result;\r\n    //   const objectStore = db\r\n    //     .transaction(\"user\", \"readwrite\")\r\n    //     .objectStore(\"user\");\r\n  \r\n    //   objectStore.getAll().onsuccess = (event) => {\r\n    //     console.log('asdads', event.target.result);\r\n    //   };\r\n    // }\r\n  })\r\n</script>\r\n\r\n<template>\r\n  <v-container fluid class=\"h-100 bg-cover\">\r\n    <v-row justify=\"center\" align=\"center\" class=\"h-100\">\r\n      <v-col cols=\"12\" sm=\"8\" md=\"4\">\r\n        <v-card class=\"bg-primary\">\r\n          <v-card-title class=\"headline\">\r\n            <h3 class=\"my-3 text-center\">EIR AOI - Iris</h3>\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <v-form @submit.prevent=\"login\">\r\n              <v-text-field v-model=\"username\" label=\"Username\" variant=\"outlined\" class=\"mb-2\" required></v-text-field>\r\n              <v-text-field v-model=\"password\" label=\"Password\" variant=\"outlined\" type=\"password\" required>\r\n              </v-text-field>\r\n              <v-btn type=\"submit\" class=\"my-2\" block=\"\" color=\"success\">GO</v-btn>\r\n            </v-form>\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<style scoped>\r\n  .bg-cover {\r\n    background: linear-gradient(rgba(255, 255, 255, .4), rgba(255, 255, 255, .4)), url('/bg-iris.png');\r\n    background-size: cover;\r\n    background-position: center;\r\n  }\r\n</style>"],"names":["event"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOE,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,WAAW,IAAI,EAAE;AAEvB,UAAM,QAAQ,MAAM;AAClB,YAAM,KAAK,+BAA+B;AAAA,QACxC,UAAU,SAAS;AAAA,QACnB,UAAU,SAAS;AAAA,MACzB,CAAK,EAAE,KAAK,CAAC,QAAQ;AACf,gBAAQ,IAAI,cAAc,GAAG;AAC7B,YAAI,IAAI,KAAK,eAAe,KAAK;AAC/B,gBAAM,UAAU,UAAU,KAAK,QAAQ,CAAC;AACxC,kBAAQ,kBAAkB,CAAC,UAAU;AACnC,kBAAM,KAAK,MAAM,OAAO;AACxB,kBAAM,cAAc,GAAG,kBAAkB,QAAQ;AAAA,cAC/C,SAAS;AAAA,YACrB,CAAW;AACD,wBAAY,YAAY,YAAY,YAAY;AAAA,cAC9C,QAAQ;AAAA,YACpB,CAAW;AACD,wBAAY,YAAY,SAAS,SAAS;AAAA,cACxC,QAAQ;AAAA,YACpB,CAAW;AAED,wBAAY,YAAY,aAAa,OAAOA,WAAU;AAEpD,oBAAM,kBAAkB,GACrB,YAAY,QAAQ,WAAW,EAC/B,YAAY,MAAM;AAErB,oBAAM,gBAAgB,IAAI,IAAI,KAAK,IAAI;AACvC,uBAAS,OAAO;AAAA,YAC5B;AAAA,UACA;AAAA,QACO;AAAA,MACP,CAAK,EAAE,MAAM,CAAC,QAAQ;AAChB,cAAM,IAAI,MAAM,GAAG;AAAA,MACzB,CAAK;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}