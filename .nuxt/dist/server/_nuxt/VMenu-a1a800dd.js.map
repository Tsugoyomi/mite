{"version":3,"file":"VMenu-a1a800dd.js","sources":["../../../../node_modules/vuetify/lib/components/VMenu/VMenu.mjs"],"sourcesContent":["import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VMenu.css\";\n\n// Components\nimport { VDialogTransition } from \"../transitions/index.mjs\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.mjs\";\nimport { VOverlay } from \"../VOverlay/index.mjs\";\nimport { makeVOverlayProps } from \"../VOverlay/VOverlay.mjs\"; // Composables\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\";\nimport { useScopeId } from \"../../composables/scopeId.mjs\"; // Utilities\nimport { computed, inject, mergeProps, nextTick, provide, ref, shallowRef, watch } from 'vue';\nimport { VMenuSymbol } from \"./shared.mjs\";\nimport { focusableChildren, focusChild, genericComponent, getNextElement, getUid, omit, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport const makeVMenuProps = propsFactory({\n  // TODO\n  // disableKeys: Boolean,\n  id: String,\n  ...omit(makeVOverlayProps({\n    closeDelay: 250,\n    closeOnContentClick: true,\n    locationStrategy: 'connected',\n    openDelay: 300,\n    scrim: false,\n    scrollStrategy: 'reposition',\n    transition: {\n      component: VDialogTransition\n    }\n  }), ['absolute'])\n}, 'VMenu');\nexport const VMenu = genericComponent()({\n  name: 'VMenu',\n  props: makeVMenuProps(),\n  emits: {\n    'update:modelValue': value => true\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const isActive = useProxiedModel(props, 'modelValue');\n    const {\n      scopeId\n    } = useScopeId();\n    const uid = getUid();\n    const id = computed(() => props.id || `v-menu-${uid}`);\n    const overlay = ref();\n    const parent = inject(VMenuSymbol, null);\n    const openChildren = shallowRef(0);\n    provide(VMenuSymbol, {\n      register() {\n        ++openChildren.value;\n      },\n      unregister() {\n        --openChildren.value;\n      },\n      closeParents() {\n        setTimeout(() => {\n          if (!openChildren.value) {\n            isActive.value = false;\n            parent?.closeParents();\n          }\n        }, 40);\n      }\n    });\n    async function onFocusIn(e) {\n      const before = e.relatedTarget;\n      const after = e.target;\n      await nextTick();\n      if (isActive.value && before !== after && overlay.value?.contentEl &&\n      // We're the topmost menu\n      overlay.value?.globalTop &&\n      // It isn't the document or the menu body\n      ![document, overlay.value.contentEl].includes(after) &&\n      // It isn't inside the menu body\n      !overlay.value.contentEl.contains(after)) {\n        const focusable = focusableChildren(overlay.value.contentEl);\n        focusable[0]?.focus();\n      }\n    }\n    watch(isActive, val => {\n      if (val) {\n        parent?.register();\n        document.addEventListener('focusin', onFocusIn, {\n          once: true\n        });\n      } else {\n        parent?.unregister();\n        document.removeEventListener('focusin', onFocusIn);\n      }\n    });\n    function onClickOutside() {\n      parent?.closeParents();\n    }\n    function onKeydown(e) {\n      if (props.disabled) return;\n      if (e.key === 'Tab') {\n        const nextElement = getNextElement(focusableChildren(overlay.value?.contentEl, false), e.shiftKey ? 'prev' : 'next', el => el.tabIndex >= 0);\n        if (!nextElement) {\n          isActive.value = false;\n          overlay.value?.activatorEl?.focus();\n        }\n      }\n    }\n    function onActivatorKeydown(e) {\n      if (props.disabled) return;\n      const el = overlay.value?.contentEl;\n      if (el && isActive.value) {\n        if (e.key === 'ArrowDown') {\n          e.preventDefault();\n          focusChild(el, 'next');\n        } else if (e.key === 'ArrowUp') {\n          e.preventDefault();\n          focusChild(el, 'prev');\n        }\n      } else if (['ArrowDown', 'ArrowUp'].includes(e.key)) {\n        isActive.value = true;\n        e.preventDefault();\n        setTimeout(() => setTimeout(() => onActivatorKeydown(e)));\n      }\n    }\n    const activatorProps = computed(() => mergeProps({\n      'aria-haspopup': 'menu',\n      'aria-expanded': String(isActive.value),\n      'aria-owns': id.value,\n      onKeydown: onActivatorKeydown\n    }, props.activatorProps));\n    useRender(() => {\n      const overlayProps = VOverlay.filterProps(props);\n      return _createVNode(VOverlay, _mergeProps({\n        \"ref\": overlay,\n        \"class\": ['v-menu', props.class],\n        \"style\": props.style\n      }, overlayProps, {\n        \"modelValue\": isActive.value,\n        \"onUpdate:modelValue\": $event => isActive.value = $event,\n        \"absolute\": true,\n        \"activatorProps\": activatorProps.value,\n        \"onClick:outside\": onClickOutside,\n        \"onKeydown\": onKeydown\n      }, scopeId), {\n        activator: slots.activator,\n        default: function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          return _createVNode(VDefaultsProvider, {\n            \"root\": \"VMenu\"\n          }, {\n            default: () => [slots.default?.(...args)]\n          });\n        }\n      });\n    });\n    return forwardRefs({\n      id,\n      Î¨openChildren: openChildren\n    }, overlay);\n  }\n});\n//# sourceMappingURL=VMenu.mjs.map"],"names":["_createVNode","_mergeProps"],"mappings":"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","x_google_ignoreList":[0]}