import{_ as M}from"./Snackbars.vue.Ksxm06XR.js";import{a2 as H,r as i,aR as U,aH as Q,o as v,c as $,b as a,w as o,F as B,aV as K,bh as l,az as A,as as G,d as p,bE as D,Q as F,a as V,t as W,p as X,e as Y}from"./entry.6pNwWNX7.js";import{a as k}from"./axios.G2rPRu76.js";import{V as Z,a as ee}from"./VRow.fqiHwSrA.js";import{V as f,a as te}from"./VBtn.g99suJ2P.js";import{V as j}from"./VTooltip.k0af9WBP.js";import{V as J,b as L,a as ae}from"./VCard.8NQANxpd.js";import{V as oe}from"./VToolbar.ph1PvptC.js";import{V as le}from"./VForm.rH8k5zuP.js";import{e as E}from"./VTextField.gdcGVEzQ.js";import{V as N}from"./VDivider.iQi5Fdkf.js";import{V as se}from"./VDialog.nyYK5wO3.js";import{V as re}from"./VAvatar.b22ksWPv.js";import{_ as ne}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./VOverlay.ISpMORIT.js";/* empty css              */import"./index.L2hhtsEA.js";const O=g=>(X("data-v-36d46dae"),g=g(),Y(),g),ue={class:"containerz w-100 py-4",style:{position:"relative"}},ie=O(()=>V("span",null,"Exit",-1)),de=["src"],ce=O(()=>V("span",null,"Create Group",-1)),me={class:"text-right"},pe=H({__name:"index",setup(g){const y=i(null),T=i([]),c=i(!1),S=i(),u=U({name:"",img:"",type:"GROUP"}),_=U({code:""}),I=i([s=>s?!0:"Requred."]),b=i(""),w=i(""),d=i(!1),m=i(1),C=async()=>{const s={userId:y.value};await k.post("http://127.0.0.1:8000/room/list",s).then(e=>{T.value=e.data.data}).catch(e=>{throw new Error(e)})},P=async s=>{var n;if((await((n=S.value)==null?void 0:n.validate())).valid)if(s===1){const t=btoa(u.name),r=btoa("--EIR AOI--"),h=btoa(u.type),R={...u,code:`${t}$${r}$${h}`,userId:y.value};await k.post("http://127.0.0.1:8000/room/create",R).then(x=>{b.value=x.data.statusCode===200?"success":"red",w.value=x.data.message,d.value=!0}).catch(x=>{throw new Error(x)}).finally(()=>{c.value=!1,C(),u.name="",u.img="",setTimeout(()=>{d.value=!1},1e3)})}else{const t={..._,type:"GROUP",userId:y.value};await k.post("http://127.0.0.1:8000/room/join",t).then(r=>{b.value=r.data.statusCode===200?"success":"red",w.value=r.data.message,d.value=!0}).catch(r=>{throw new Error(r)}).finally(()=>{c.value=!1,C(),_.code="",setTimeout(()=>{d.value=!1},1e3)})}},q=s=>{location.href=`/iris/${s}`},z=async s=>{const e={name:s.name,code:s.code,type:s.type,userId:s.user_id};await k.post("http://127.0.0.1:8000/room/leave",e).then(n=>{b.value=n.data.statusCode===200?"success":"red",w.value=n.data.message,d.value=!0}).catch(n=>{throw new Error(n)}).finally(()=>{C()})};return Q(()=>{const s=indexedDB.open("iris",3);s.onsuccess=e=>{const t=e.target.result.transaction("user","readwrite").objectStore("user");t.getAll().onsuccess=r=>{y.value=r.target.result[0].user_id}},setTimeout(()=>{C()},500)}),(s,e)=>{const n=M;return v(),$("div",ue,[a(Z,{class:"w-100"},{default:o(()=>[(v(!0),$(B,null,K(l(T),(t,r)=>(v(),F(ee,{cols:"3",key:r,class:"mb-3 list-group"},{default:o(()=>[a(J,{class:"elevation-3 card-group"},{default:o(()=>[a(ae,{class:"headline text-primary"},{default:o(()=>[V("b",null,W(t.name),1),a(j,{location:"top"},{activator:o(({props:h})=>[a(re,A({class:"icon-exit"},h,{onClick:D(R=>z(t),["prevent"])}),{default:o(()=>[p("mdi-exit-run")]),_:2},1040,["onClick"])]),default:o(()=>[ie]),_:2},1024)]),_:2},1024),a(N),a(L,null,{default:o(()=>[V("img",{src:t.img,width:"100%",alt:""},null,8,de),a(f,{class:"mt-2",block:"",variant:"outlined",color:"primary",onClick:h=>q(t.code)},{default:o(()=>[p("Enter")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(j,{location:"top"},{activator:o(({props:t})=>[a(f,A({color:"success",class:"icon-add"},t,{icon:"mdi-plus",onClick:e[0]||(e[0]=r=>c.value=!0)}),null,16)]),default:o(()=>[ce]),_:1}),a(se,{modelValue:l(c),"onUpdate:modelValue":e[7]||(e[7]=t=>G(c)?c.value=t:null),transition:"dialog-bottom-transition",width:"30%"},{default:o(()=>[a(J,null,{default:o(()=>[a(oe,{color:"primary",title:l(m)===1?"Create Group":"Join Group"},null,8,["title"]),a(L,null,{default:o(()=>[a(te,{modelValue:l(m),"onUpdate:modelValue":e[1]||(e[1]=t=>G(m)?m.value=t:null),color:"primary",mandatory:"",density:"compact",class:"mb-4"},{default:o(()=>[a(f,{value:1},{default:o(()=>[p("Create")]),_:1}),a(f,{value:2},{default:o(()=>[p("Join")]),_:1})]),_:1},8,["modelValue"]),a(le,{ref_key:"formInput",ref:S,onSubmit:e[6]||(e[6]=D(t=>P(l(m)),["prevent"]))},{default:o(()=>[l(m)===1?(v(),$(B,{key:0},[a(E,{modelValue:l(u).name,"onUpdate:modelValue":e[2]||(e[2]=t=>l(u).name=t),rules:l(I),label:"Group name",variant:"outlined",density:"compact",class:"mb-6","hide-details":""},null,8,["modelValue","rules"]),a(E,{modelValue:l(u).img,"onUpdate:modelValue":e[3]||(e[3]=t=>l(u).img=t),rules:l(I),label:"Group image",variant:"outlined",density:"compact",class:"mb-8","hide-details":""},null,8,["modelValue","rules"])],64)):(v(),F(E,{key:1,modelValue:l(_).code,"onUpdate:modelValue":e[4]||(e[4]=t=>l(_).code=t),rules:l(I),label:"Group code",variant:"outlined",density:"compact",class:"mb-6","hide-details":""},null,8,["modelValue","rules"])),a(N,{class:"mb-4"}),V("div",me,[a(f,{color:"warning",variant:"outlined",class:"mr-3",onClick:e[5]||(e[5]=t=>c.value=!1)},{default:o(()=>[p("Close")]),_:1}),a(f,{color:"success",variant:"outlined",type:"submit"},{default:o(()=>[p("Submit")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(n,{flag:l(b),text:l(w),modelValue:l(d),"onUpdate:modelValue":e[8]||(e[8]=t=>G(d)?d.value=t:null)},null,8,["flag","text","modelValue"])])}}}),Se=ne(pe,[["__scopeId","data-v-36d46dae"]]);export{Se as default};
